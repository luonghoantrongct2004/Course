@model HomeViewModel

<link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<script>
    AOS.init();
</script>
<section class="home-two-slide d-flex align-items-center">
    <div class="container">
        <div class="row ">
            <div class="col-lg-8 col-12" >
                <div class="home-slide-face">
                    <div class="home-slide-text ">
                        <h5>Dẫn đầu cho các khóa học online</h5>
                        <h1>Rèn luyện & nâng cao trình độ qua những khóa học tại Academy Lotus</h1>
                    </div>
                    <div class="banner-content">
                        <form class="form" name="store" id="store" method="get" action="/home/search">
                            <div class="form-inner">
                                <!-- Flexible Search Input -->
                                <div class="input-group">
                                    <input type="text" name="name" class="form-control" placeholder="Tìm kiếm theo tên khóa học, thể loại, tên người dạy hoặc giá...">
                                    <button class="btn btn-primary sub-btn" type="submit">Tìm kiếm</button>
                                </div>
                            </div>
                        </form>

                    </div>
                </div>
            </div>
        </div>

        <div class="shapes">
            <img class="shapes-one" src="~/assets/img/bg/home-right.png" alt="Img">
            <img class="shapes-two" src="~/assets/img/bg/home-right-bottom.png" alt="Img">
            <img class="shapes-middle" src="~/assets/img/bg/home-middle.png" alt="Img">
            <img class="shapes-four wow animate__animated animate__slideInLeft" src="~/assets/img/bg/home-left.png" alt="Img">
        </div>

    </div>
</section>

<section class="home-three-favourite">
    <div class="container">
        <div class="row">
            <div class="container">
                <div class="home-three-head section-header-title" style="
    padding-bottom: 20px;    margin-bottom: 48px;
}" data-aos="fade-up">
                    <div class="row align-items-center d-flex justify-content-between">
                        <div class="col-lg-12 col-sm-12">
                            <h2>
                                Những thể loại của Lotus Academy
                            </h2>
                        </div>
                    </div>
                </div>
                <div class="owl-carousel home-three-favourite-carousel owl-theme aos">
                    
                @if (Model.Categories != null && Model.Categories.Any())
                    {
                        foreach (var cate in Model.Categories)
                        {
                            <div class="favourite-box" data-aos="fade-down">
                                <div class="favourite-item flex-fill">
                                    <div class="categories-icon">
                                        <img class="img-fluid" src="@cate.Image" alt="@cate.Name">
                                    </div>
                                    <div class="categories-content course-info">
                                        <h3>@cate.Name</h3>
                                    </div>
                                    <div class="course-instructors">
                                        <div class="instructors-info">
                                            <p class="me-4">Khóa học</p>
                                            <ul class="instructors-list">
                                                @foreach (var item in Model.Courses.Where(c => c.CategoryID == cate.CategoryID).Take(3).ToList())
                                                {
                                                    <li>
                                                        <a href="/home/search?name=@item.Category.Name" data-bs-toggle="tooltip" data-bs-placement="top" title data-bs-original-title="@item.Category.Name"><img src="@item.Image" alt="img"></a>
                                                    </li>
                                                }
                                                <li class="more-set">
                                                    <a href="/home/search?name=@cate.Name">@Model.Courses.Where(c => c.CategoryID == cate.CategoryID).Count()+</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
</section>

<section class="featured-courses-sec">
    <div class="patter-one-main">
        <img class="patter-one" src="~/assets/img/bg/patter-one.png" alt="Img">
    </div>
    <div class="container">
        <div class="header-two-title text-center" data-aos="fade-up">
            <p class="tagline">Khóa học</p>
            <h2>Khóa học chất lượng</h2>
            <div class="header-two-text m-auto text-center d-block">
                <p class="mb-0">
                   Những khóa học của Lotus Academy <br/>
                   có chất lượng tốt nhất
                </p>
            </div>
        </div>
        <div class="featured-courses-two">
            <div class="row">
                @if (Model.Courses != null && Model.Courses.Any()){
                foreach (var course in Model.Courses.Take(6))
                {
                    <div class="col-xl-4 col-lg-6 col-md-6 col-sm-12 d-flex" data-aos="fade-down">
                        <div class="featured-details-two">
                            <div class="product-item-two">
                                <div class="product-img-two">
                                    <a href="/home/detail?id=@course.CourseID">
                                        <img class="img-fluid" alt="Img" src="@course.Image" style="max-height: 328px;">
                                    </a>
                                    <div class="price-text">
                                        <h4><span>@course.Category?.Name</span></h4>
                                    </div>
                                </div>
                                <div class="course-details-content">
                                    <div class="image-info">
                                        <img class="img-fluid" alt="Img" src="~/Lotus.png">
                                    </div>
                                    @*  <div class="rating">
                                    <i class="fas fa-star filled"></i>
                                    <i class="fas fa-star filled"></i>
                                    <i class="fas fa-star filled"></i>
                                    <i class="fas fa-star filled"></i>
                                    <i class="fas fa-star filled"></i>
                                    <span class="ms-3">203 reviews</span>
                                </div>
                                *@
                                    <div class="name-text featured-info-two">
                                        <h3 class="title instructor-text">
                                            <a href="/home/detail?id=@course.CourseID">
                                                @course.Title
                                            </a>
                                        </h3>
                                        <p class="me-3">
                                            By<span class="text-danger ms-2">@course.Author?.FullName</span>
                                        </p>
                                    </div>
                                    <div class="featured-info-time d-flex align-items-center">
                                        <div class="hours-time-two d-flex align-items-center">
                                            <span><i class="fa-regular fa-clock me-2"></i></span>
                                            @{
                                                var chapters = course.Chapters?.ToList();
                                                double totalCourseDuration = chapters?
                                                .Sum(chapter => chapter.Lessons.Sum(lesson => lesson.Duration)) ?? 0;

                                                int hours = (int)(totalCourseDuration / 3600);
                                                int minutes = (int)((totalCourseDuration % 3600) / 60);
                                                int seconds = (int)(totalCourseDuration % 60);
                                            }
                                            <p>
                                                @if (hours > 0)
                                                {
                                                    @($"{hours} giờ{(hours > 1 ? "" : "")} ")
                                                }
                                                @if (minutes > 0)
                                                {
                                                    @($"{minutes} phút{(minutes > 1 ? "" : "")} ")
                                                }
                                                @if (seconds > 0)
                                                {
                                                    @($"{seconds} giây{(seconds > 1 ? "" : "")}")
                                                }
                                                @if (hours == 0 && minutes == 0 && seconds == 0)
                                                {
                                                    @("0 giây")
                                                }
                                            </p>
                                        </div>
                                        <div class="course-view d-inline-flex align-items-center">
                                            <div class="course-price">
                                                <h3>@{
                                                        var price = course.Price * (1 - course.Discount / 100M);
                                                    }
                                                    @price.ToString("N0") đ
                                                    <span>@course.Price.ToString("N0") đ </span>
                                                </h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
                }
            </div>
        </div>

        <div class="col-lg-12" data-aos="fade-up">
            <div class="more-details text-center">
                <a href="/home/search" class="discover-btn">Xem tất cả khóa học <i class="fas fa-arrow-right ms-2"></i></a>
            </div>
        </div>

    </div>
</section>


<section class="section master-skill">
    <div class="container">
        <div class="row">
            <div class="col-lg-7 col-md-12">
                <div class="section-header aos" data-aos="fade-up">
                    <div class="section-sub-head">
                        <span>Có Gì Mới</span>
                        <h2>Làm chủ các kỹ năng để thúc đẩy sự nghiệp của bạn</h2>
                    </div>
                </div>
                <div class="section-text aos" data-aos="fade-up">
                    <p>
                        Nhận chứng chỉ, làm chủ các kỹ năng công nghệ hiện đại, và nâng tầm sự nghiệp của bạn — 
                        dù bạn mới bắt đầu hay đã là chuyên gia lâu năm. 95% học viên Lotus Academy báo cáo rằng nội dung thực hành của chúng tôi đã trực tiếp giúp ích cho sự nghiệp của họ.
                    </p>
                </div>
                <div class="career-group aos" data-aos="fade-up">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 d-flex">
                            <div class="certified-group blur-border d-flex">
                                <div class="get-certified d-flex align-items-center">
                                    <div class="blur-box">
                                        <div class="certified-img ">
                                            <img src="~/assets/img/icon/icon-1.svg" alt="Hình ảnh" class="img-fluid">
                                        </div>
                                    </div>
                                    <p>Luôn có động lực với những giảng viên tận tâm</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 d-flex">
                            <div class="certified-group blur-border d-flex">
                                <div class="get-certified d-flex align-items-center">
                                    <div class="blur-box">
                                        <div class="certified-img ">
                                            <img src="~/assets/img/icon/icon-2.svg" alt="Hình ảnh" class="img-fluid">
                                        </div>
                                    </div>
                                    <p>Cập nhật những xu hướng mới nhất trong lĩnh vực điện toán đám mây</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 d-flex">
                            <div class="certified-group blur-border d-flex">
                                <div class="get-certified d-flex align-items-center">
                                    <div class="blur-box">
                                        <div class="certified-img ">
                                            <img src="~/assets/img/icon/icon-3.svg" alt="Hình ảnh" class="img-fluid">
                                        </div>
                                    </div>
                                    <p>Nhận chứng chỉ với hơn 100+ khóa học cấp chứng chỉ</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 d-flex">
                            <div class="certified-group blur-border d-flex">
                                <div class="get-certified d-flex align-items-center">
                                    <div class="blur-box">
                                        <div class="certified-img ">
                                            <img src="~/assets/img/icon/icon-4.svg" alt="Hình ảnh" class="img-fluid">
                                        </div>
                                    </div>
                                    <p>Xây dựng kỹ năng theo cách của bạn, từ phòng thi đến khóa học</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-5 col-md-12 d-flex align-items-end">
                <div class="career-img aos" data-aos="fade-up">
                    <img src="~/assets/img/join.png" alt="Hình ảnh" class="img-fluid">
                </div>
            </div>
        </div>
    </div>
</section>




<section class="section trend-course">
    <div class="container">
        <div class="feature-instructors">
            <div class="section-header aos" data-aos="fade-up">
                <div class="section-sub-head feature-head text-center">
                    <h2>Giáo viên nổi bật</h2>
                    <div class="section-text aos" data-aos="fade-up">
                        <p class="mb-0">
                           Những giáo viên nổi bật của Lotus Academy
                        </p>
                    </div>
                </div>
            </div>
            <div class="owl-carousel instructors-course owl-theme aos" data-aos="fade-up">
                @foreach (var item in Model.Instructors)
                {
                    <div class="instructors-widget">
                        <div class="instructors-img ">
                            <a href="">
                                <img class="img-fluid" alt="Img" src="@item.Image">
                            </a>
                        </div>
                        <div class="instructors-content text-center">
                            <h5><a href="">@item.FullName</a></h5>
                            <div class="student-count d-flex justify-content-center">
                                <i class="fa-solid fa-user-group"></i>
                                <span>@Model.Courses.Where(u => u.AuthorID == item.Id).Count() Khóa học</span>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>

    </div>
</section>

<section class="section user-love" data-aos="fade-up">
    <div class="container">
        <div class="section-header white-header aos" data-aos="fade-up">
            <div class="section-sub-head feature-head text-center">
                <span>Hãy xem những đánh giá thực tế này</span>
                <h2>Người dùng yêu thích chúng tôi - Đừng chỉ nghe từ chúng tôi.</h2>
            </div>
        </div>
    </div>
</section>

<section class="testimonial-four">
    <div class="review">
        <div class="container">
            <div class="testi-quotes">
                <img src="~/assets/img/qute.png" alt="Hình ảnh">
            </div>
            <div class="mentor-testimonial lazy slider aos" data-aos="fade-up" data-sizes="50vw">

                <!-- Testimonial 1: Aristotle -->
                <div class="d-flex justify-content-center">
                    <div class="testimonial-all d-flex justify-content-center">
                        <div class="testimonial-two-head text-center align-items-center d-flex">
                            <div class="testimonial-four-saying">
                                <div class="testi-right">
                                    <img  src="~/assets/img/qute-01.png" alt="Img">
                                </div>
                                <p>
                                    "Gốc rễ của việc giáo dục thì đắng cay, nhưng quả của nó lại ngọt ngào."
                                </p>
                                <div class="four-testimonial-founder">
                                    <div class="fount-about-img">
                                        <a href="https://vi.wikipedia.org/wiki/Aristotle"><img src="https://imgs.search.brave.com/aoDkONjmlOBOO1Qv9txzTDvK1XSIu21NyRlcct9a6KI/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9oaXBz/LmhlYXJzdGFwcHMu/Y29tL2htZy1wcm9k/L2ltYWdlcy9hcmlz/dG90bGVfYnlfcmFw/aGFlbF93aWtpbWVk/aWFfY29tbW9uc19j/cm9wcGVkLmpwZz9y/ZXNpemU9OTgwOio" alt="Aristotle" class="img-fluid"></a>
                                    </div>
                                    <h3>Aristotle</a></h3>
                                    <span>Triết gia Hy Lạp</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Testimonial 2: Nelson Mandela -->
                <div class="d-flex justify-content-center">
                    <div class="testimonial-all d-flex justify-content-center">
                        <div class="testimonial-two-head text-center align-items-center d-flex">
                            <div class="testimonial-four-saying">
                                <div class="testi-right">
                                    <img  src="~/assets/img/qute-01.png" alt="Img">
                                </div>
                                <p>
                                    "Giáo dục là vũ khí mạnh nhất mà bạn có thể sử dụng để thay đổi thế giới."
                                </p>
                                <div class="four-testimonial-founder">
                                    <div class="fount-about-img">
                                        <a href="https://vi.wikipedia.org/wiki/Nelson_Mandela"><img src="https://imgs.search.brave.com/e_pK8c3EnB71zUjn9Ep9C9580gZme8dMru5XNMF8b5o/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9oaXBz/LmhlYXJzdGFwcHMu/Y29tL2htZy1wcm9k/L2ltYWdlcy9fcGhv/dG8tYnktcGVyLWFu/ZGVycy1wZXR0ZXJz/c29uZ2V0dHktaW1h/Z2VzLmpwZz9jcm9w/PTF4dzoxLjB4aDtj/ZW50ZXIsdG9wJnJl/c2l6ZT02NDA6Kg" alt="Nelson Mandela" class="img-fluid"></a>
                                    </div>
                                    <h3><a href="https://vi.wikipedia.org/wiki/Nelson_Mandela">Nelson Mandela</a></h3>
                                    <span>Nhà hoạt động chống phân biệt chủng tộc</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Testimonial 3: Albert Einstein -->
                <div class="d-flex justify-content-center">
                    <div class="testimonial-all d-flex justify-content-center">
                        <div class="testimonial-two-head text-center align-items-center d-flex">
                            <div class="testimonial-four-saying">

                                <div class="testi-right">
                                    <img  src="~/assets/img/qute-01.png" alt="Img">
                                </div>
                                <p>
                                    "Giáo dục không phải là việc học thuộc các sự kiện, mà là việc rèn luyện tâm trí để tư duy."
                                </p>
                                <div class="four-testimonial-founder">
                                    <div class="fount-about-img">
                                        <a href="https://vi.wikipedia.org/wiki/Albert_Einstein"><img src="https://imgs.search.brave.com/yc6fYyrNTN1LfSKfQg2MXKsQB3Ll3H65HmlgD-JYrzU/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9oaXBz/LmhlYXJzdGFwcHMu/Y29tL2htZy1wcm9k/L2ltYWdlcy9hbGJl/cnQtZWluc3RlaW4t/c3RpY2tzLW91dC1o/aXMtdG9uZ3VlLXdo/ZW4tYXNrZWQtYnkt/bmV3cy1waG90by0x/NjgxMzE2NzQ5Lmpw/Zz9jcm9wPTEuMDB4/dzowLjk1NnhoOzAs/MC4wNDM3eGgmcmVz/aXplPTk4MDoq" alt="Albert Einstein" class="img-fluid"></a>
                                    </div>
                                    <h3><a href="https://vi.wikipedia.org/wiki/Albert_Einstein">Albert Einstein</a></h3>
                                    <span>Nhà vật lý học</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>


<section class="section become-instructors aos" data-aos="fade-up">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-6 d-flex">
                <div class="student-mentor cube-instuctor ">
                    <h4>Trở thành giảng viên</h4>
                    <div class="row">
                        <div class="col-lg-7 col-md-12">
                            <div class="top-instructors">
                                <p>
                                    Những giảng viên hàng đầu từ khắp nơi trên thế giới giảng dạy hàng triệu học viên trên
                                    Mentoring.
                                </p>
                            </div>
                        </div>
                        <div class="col-lg-5 col-md-12">
                            <div class="mentor-img">
                                <img class="img-fluid" alt="Hình ảnh" src="~/assets/img/icon/become-02.svg">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 d-flex">
                <div class="student-mentor yellow-mentor">
                    <h4>Thay đổi cách tiếp cận giáo dục</h4>
                    <div class="row">
                        <div class="col-lg-8 col-md-12">
                            <div class="top-instructors">
                                <p>
                                    Tạo một tài khoản để nhận bản tin của chúng tôi, các đề xuất khóa học và các chương trình khuyến mãi.
                                </p>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-12">
                            <div class="mentor-img">
                                <img class="img-fluid" alt="Hình ảnh" src="~/assets/img/icon/become-01.svg">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<section class="featured-section-five">
    <div class="container">
        <div class="header-five-title text-center" data-aos="fade-down">
            <h2>Những khóa học nổi bật</h2>
            <p>Hãy chọn cho mình khóa học nổi bật</p>
        </div>
        <div class="row">
            <div class="featured-courses-five-tab" data-aos="fade-up">
                <div class="tab-content">
                    <div class="nav tablist-five" role="tablist">
                        @foreach (var item in Model.Categories.Take(5).Select((category, index) => new { Category = category, Index = index }))
                        {
                            <a class="nav-tab @(item.Index == 0 ? "active" : "")" data-bs-toggle="tab" href="#@item.Category.CategoryID" role="tab">
                                @item.Category.Name
                            </a>
                        }
                    </div>
                    <style>
                        .heart-five .feather-shopping-cart {
                            position: relative;
                            width: 40px;
                            height: 40px;
                            background-color: transparent;
                            border: 2px solid #fff;
                            align-items: center;
                            display: flex;
                            justify-content: center;
                            border-radius: 50%;
                            font-size: 12px;
                            color: #fff;
                            -webkit-transition: .5s;
                            -moz-transition: .5s;
                            -o-transition: .5s;
                            transition: .5s;
                        }

                        .course-box-five:hover .heart-five .feather-shopping-cart {
                            width: 40px;
                            height: 40px;
                            background-color: transparent;
                            border: 2px solid transparent;
                            align-items: center;
                            display: flex;
                            justify-content: center;
                            border-radius: 50%;
                            font-size: 16px;
                            color: red;
                            stroke: #000;
                            stroke-width: 40px;
                            z-index: 2;
                            -webkit-transition: .5s;
                            -moz-transition: .5s;
                            -o-transition: .5s;
                            transition: .5s;
                        }
                    </style>
                    <div class="tab-content">
                        @foreach (var item in Model.Categories.Take(5).Select((category, index) => new { Category = category, Index = index }))
                        {
                            <div class="tab-pane fade @(item.Index == 0 ? "active show" : "")" id="@item.Category.CategoryID">
                                <div class="ux-design-five">
                                    <div class="row">
                                        @foreach (var course in Model.Courses.Where(c => c.CategoryID == item.Category.CategoryID).Take(8).ToList())
                                        {
                                            var chapters = course.Chapters?.ToList();
                                            double totalCourseDuration = chapters?
                                            .Sum(chapter => chapter.Lessons.Sum(lesson => lesson.Duration)) ?? 0;

                                            int hours = (int)(totalCourseDuration / 3600);
                                            int minutes = (int)((totalCourseDuration % 3600) / 60);
                                            int seconds = (int)(totalCourseDuration % 60);
                                            <div class="col-xl-4 col-lg-6 col-md-6 col-sm-12">
                                                <div class="course-box-five">
                                                    <div class="product-five">
                                                        <div class="product-img-five">
                                                            <a href="/home/detail?id=@course.CourseID">
                                                                <img class="img-fluid" alt="Img" src="@course.Image">
                                                            </a>
                                                            <div class="heart-five">
                                                                <a href="javascript:void(0);" onclick="addToCart(@course.CourseID)">
                                                                    <i class="fa-regular feather-shopping-cart"></i>
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <div class="product-content-five">
                                                            <div class="course-group-five">
                                                                <div class="course-group-img-five">
                                                                    <a href="/home/detail?id=@course.CourseID">
                                                                        <img src="@course.Author.Image" alt="Img" class="img-fluid">
                                                                    </a>
                                                                    <h6>
                                                                        <a href="/home/detail?id=@course.CourseID">
                                                                            @course.Author.FullName
                                                                        </a>
                                                                    </h6>
                                                                </div>
                                                            </div>
                                                            <h3 class="product-five-title">
                                                                <a href="/home/detail?id=@course.CourseID">
                                                                    @course.Title
                                                                </a>
                                                            </h3>
                                                            <div class="info-five-middle">
                                                                <div class="course-view-five">
                                                                    <span class="me-2"><a href="#"><i class="fa-regular fa-clock"></i></a></span>
                                                                    <p>
                                                                        @if (hours > 0)
                                                                        {
                                                                            @($"{hours} giờ{(hours > 1 ? "" : "")} ")
                                                                        }
                                                                        @if (minutes > 0)
                                                                        {
                                                                            @($"{minutes} phút{(minutes > 1 ? "" : "")} ")
                                                                        }
                                                                        @if (seconds > 0)
                                                                        {
                                                                            @($"{seconds} giây{(seconds > 1 ? "" : "")}")
                                                                        }
                                                                        @if (hours == 0 && minutes == 0 && seconds == 0)
                                                                        {
                                                                            @("0 giây")
                                                                        }
                                                                    </p>
                                                                </div>
                                                                <div class="rating-img">
                                                                    <span class="me-2"><i class="fa-solid fa-book-open"></i></span>
                                                                    <p> @course.Chapters.Sum(chapter => chapter.Lessons.Count())+ Chương</p>
                                                                </div>
                                                            </div>
                                                            <div class="price-five-group">
                                                                @{
                                                                    var price = course.Price * (1 - course.Discount / 100M);
                                                                }
                                                                <p>@course.Category.Name</p>
                                                                <h3>@price.ToString("N0") đ</h3>
                                                                

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="joing-course-ovelay">
                                                        <a href="/home/detail?id=@course.CourseID" class="joing-course-btn">
                                                            Chi tiết
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    </div>
                                </div>
                            </div>
                        }
                    </div>

                </div>
            </div>
        </div>
    </div>
</section>


<section class="section latest-blog">
    <div class="container">
        <div class="lab-course">
            <div class="section-header aos" data-aos="fade-up">
                <div class="section-sub-head feature-head text-center">
                    <h2>Không giới hạn truy cập đến 360+ khóa học <br> và không giới hạn bài thi </h2>
                </div>
            </div>
            <div class="icon-group aos" data-aos="fade-up">
                <div class="offset-lg-1 col-lg-12">
                    <div class="row">
                        <div class="col-lg-1 col-3">
                            <div class="total-course d-flex align-items-center">
                                <div class="blur-border">
                                    <div class="enroll-img ">
                                        <img src="~/assets/img/icon/icon-09.svg" alt="Img" class="img-fluid">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-1 col-3">
                            <div class="total-course d-flex align-items-center">
                                <div class="blur-border">
                                    <div class="enroll-img ">
                                        <img src="~/assets/img/icon/icon-10.svg" alt="Img" class="img-fluid">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-1 col-3">
                            <div class="total-course d-flex align-items-center">
                                <div class="blur-border">
                                    <div class="enroll-img ">
                                        <img src="~/assets/img/icon/icon-16.svg" alt="Img" class="img-fluid">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-1 col-3">
                            <div class="total-course d-flex align-items-center">
                                <div class="blur-border">
                                    <div class="enroll-img ">
                                        <img src="~/assets/img/icon/icon-12.svg" alt="Img" class="img-fluid">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-1 col-3">
                            <div class="total-course d-flex align-items-center">
                                <div class="blur-border">
                                    <div class="enroll-img ">
                                        <img src="~/assets/img/icon/icon-13.svg" alt="Img" class="img-fluid">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-1 col-3">
                            <div class="total-course d-flex align-items-center">
                                <div class="blur-border">
                                    <div class="enroll-img ">
                                        <img src="~/assets/img/icon/icon-14.svg" alt="Img" class="img-fluid">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-1 col-3">
                            <div class="total-course d-flex align-items-center">
                                <div class="blur-border">
                                    <div class="enroll-img ">
                                        <img src="~/assets/img/icon/icon-15.svg" alt="Img" class="img-fluid">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-1 col-3">
                            <div class="total-course d-flex align-items-center">
                                <div class="blur-border">
                                    <div class="enroll-img ">
                                        <img src="~/assets/img/icon/icon-16.svg" alt="Img" class="img-fluid">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-1 col-3">
                            <div class="total-course d-flex align-items-center">
                                <div class="blur-border">
                                    <div class="enroll-img ">
                                        <img src="~/assets/img/icon/icon-17.svg" alt="Img" class="img-fluid">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-1 col-3">
                            <div class="total-course d-flex align-items-center">
                                <div class="blur-border">
                                    <div class="enroll-img ">
                                        <img src="~/assets/img/icon/icon-18.svg" alt="Img" class="img-fluid">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<section class="trending-course-sec">
    <div class="container">
        <div class="header-two-title text-center" data-aos="fade-up">
            <p class="tagline">Khóa học</p>
            <h2>Khóa học mới nhất</h2>
            <div class="header-two-text m-auto text-center d-block">
                <p class="mb-0">
                    Những khóa học mới nhất <br />
                    do Lotus Academy bình chọn
                </p>
            </div>
        </div>

        <div class="trending-course-main">
            <div class="row">
                @if (Model.Courses != null && Model.Courses.Any())
                {
                    foreach (var newCourse in Model.Courses.OrderByDescending(c => c.CreatedDate))
                    {
                          
                                                var chapters = newCourse.Chapters?.ToList();
                                                double totalCourseDuration = chapters?
                                                .Sum(chapter => chapter.Lessons.Sum(lesson => lesson.Duration)) ?? 0;

                                                int hours = (int)(totalCourseDuration / 3600);
                                                int minutes = (int)((totalCourseDuration % 3600) / 60);
                                                int seconds = (int)(totalCourseDuration % 60);
                                            
                        <div class="col-xl-6 col-lg-12 col-md-12" data-aos="fade-down">
                            <div class="trending-courses-group">
                                <div class="trending-courses-two">
                                    <div class="product-img course-column-img">
                                        <a href="">
                                            <img class="img-fluid" alt="Img" src="@newCourse.Image" style="max-height:176px;">
                                        </a>
                                        <div class="trending-price">
                                            <h4><span>@newCourse.Category?.Name</span></h4>
                                        </div>
                                    </div>
                                    <div class="course-content-column">
                                        <div class="name-text featured-info-two">
                                            <h3 class="title instructor-text">
                                                <a href="/home/detail?id=@newCourse.CourseID">
                                                    @newCourse.Title
                                                </a>
                                            </h3>
                                            <div class="time-hours-two">
                                                <span><i class="fa-regular fa-clock me-2"></i></span>
                                                <p>
                                                    @if (hours > 0)
                                                    {
                                                        @($"{hours} giờ{(hours > 1 ? "" : "")} ")
                                                    }
                                                    @if (minutes > 0)
                                                    {
                                                        @($"{minutes} phút{(minutes > 1 ? "" : "")} ")
                                                    }
                                                    @if (seconds > 0)
                                                    {
                                                        @($"{seconds} giây{(seconds > 1 ? "" : "")}")
                                                    }
                                                    @if (hours == 0 && minutes == 0 && seconds == 0)
                                                    {
                                                        @("0 giây")
                                                    }
                                                </p>
                                            </div>
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <div class="rating-price-two d-flex align-items-center">
                                                <p>@newCourse.Author?.FullName</p>
                                            </div>
                                            <div class="course-view d-inline-flex align-items-center">
                                                <div class="course-price-two">
                                                    <h3>
                                                        @{
                                                            var price = newCourse.Price * (1 - newCourse.Discount / 100M);
                                                        }

                                                        <h3>@price.ToString("N0") đ</h3>
                                                    </h3>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                }
            </div>
        </div>


        <div class="col-lg-12" data-aos="fade-up">
            <div class="more-details text-center">
                <a href="/home/search" class="discover-btn">Xem tất cả khóa học <i class="fas fa-arrow-right ms-2"></i></a>
            </div>
        </div>

    </div>
</section>

@if (!string.IsNullOrEmpty(ViewData["PaymentMessage"] as string))
{
    <script>
        Swal.fire({
            icon: 'success',
            title: 'Thanh toán thành công!',
            text: '@ViewData["PaymentMessage"]',
            showConfirmButton: false,
            timer: 2000
        });
    </script>
}

<script>
    function addToCart(courseId) {
        $.ajax({
            url: '/Cart/AddToCart',
            type: 'POST',
            data: {
                courseId: courseId
            },
            success: function (response) {
                if (response.success) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Thành công',
                        text: response.message,
                        showConfirmButton: false,
                        timer: 1500
                    });
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Lỗi',
                        text: response.message
                    });
                }
            },
            error: function () {
                Swal.fire({
                    icon: 'error',
                    title: 'Lỗi',
                    text: 'Đã xảy ra lỗi. Vui lòng thử lại sau.'
                });
            }
        });
    }
</script>